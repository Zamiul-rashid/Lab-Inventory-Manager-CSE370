{% extends 'base.html' %}

{% block title %}My Requests - Lab Inventory Manager{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1 class="page-title">
            <i class="fas fa-clipboard-list"></i>
            My Requests
        </h1>
        <p class="page-subtitle">Track all your borrowing requests</p>
    </div>

    {% if requests %}
    <div class="requests-container">
        {% for request in requests %}
        <div class="request-card">
            <div class="request-header">
                <h3>{{ request.product.name }}</h3>
                <span class="status-badge status-{{ request.status }}">
                    {{ request.get_status_display }}
                </span>
            </div>
            
            <div class="request-details">
                <div class="detail-item">
                    <i class="fas fa-tag"></i>
                    <span>Category: {{ request.product.category }}</span>
                </div>
                
                <div class="detail-item">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Requested: {{ request.borrow_date|date:"M d, Y" }}</span>
                </div>
                
                {% if request.expected_return_date %}
                <div class="detail-item">
                    <i class="fas fa-calendar-check"></i>
                    <span>Expected Return: {{ request.expected_return_date|date:"M d, Y" }}</span>
                </div>
                {% endif %}
                
                {% if request.actual_return_date %}
                <div class="detail-item">
                    <i class="fas fa-calendar-times"></i>
                    <span>Returned: {{ request.actual_return_date|date:"M d, Y" }}</span>
                </div>
                {% endif %}
                
                {% if request.notes %}
                <div class="detail-item">
                    <i class="fas fa-sticky-note"></i>
                    <span>Notes: {{ request.notes }}</span>
                </div>
                {% endif %}
            </div>
            
            {% if request.is_overdue %}
            <div class="overdue-warning">
                <i class="fas fa-exclamation-triangle"></i>
                This item is overdue!
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="no-data">
        <i class="fas fa-clipboard"></i>
        <h3>No Requests Yet</h3>
        <p>You haven't made any borrowing requests yet.</p>
        <a href="{% url 'items_list' %}" class="btn btn-primary">
            <i class="fas fa-search"></i>
            Browse Items
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block extra_css %}
<style>
    .page-header {
        margin-bottom: 2rem;
    }

    .page-title {
        font-size: 2rem;
        font-weight: 700;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-bottom: 0.5rem;
    }

    .page-subtitle {
        color: var(--text-muted);
        font-size: 1.1rem;
    }

    .requests-container {
        display: grid;
        gap: 1.5rem;
    }

    .request-card {
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: var(--shadow);
        transition: all 0.3s ease;
    }

    .request-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    .request-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid var(--border-color);
    }

    .request-header h3 {
        margin: 0;
        font-size: 1.25rem;
        font-weight: 600;
    }

    .status-badge {
        padding: 0.5rem 1rem;
        border-radius: 20px;
        font-size: 0.875rem;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .status-pending {
        background: rgba(251, 188, 4, 0.1);
        color: #f57c00;
        border: 1px solid rgba(251, 188, 4, 0.3);
    }

    .status-approved {
        background: rgba(66, 133, 244, 0.1);
        color: #1976d2;
        border: 1px solid rgba(66, 133, 244, 0.3);
    }

    .status-active {
        background: rgba(52, 168, 83, 0.1);
        color: #0d8043;
        border: 1px solid rgba(52, 168, 83, 0.3);
    }

    .status-returned {
        background: rgba(158, 158, 158, 0.1);
        color: #424242;
        border: 1px solid rgba(158, 158, 158, 0.3);
    }

    .status-rejected {
        background: rgba(234, 67, 53, 0.1);
        color: #c62828;
        border: 1px solid rgba(234, 67, 53, 0.3);
    }

    .status-overdue {
        background: rgba(234, 67, 53, 0.1);
        color: #c62828;
        border: 1px solid rgba(234, 67, 53, 0.3);
    }

    .request-details {
        display: grid;
        gap: 0.75rem;
    }

    .detail-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        color: var(--text-color);
    }

    .detail-item i {
        color: var(--primary-blue);
        width: 16px;
        text-align: center;
    }

    .overdue-warning {
        margin-top: 1rem;
        padding: 0.75rem;
        background: rgba(234, 67, 53, 0.1);
        border: 1px solid rgba(234, 67, 53, 0.3);
        border-radius: 8px;
        color: #c62828;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-weight: 500;
    }

    .no-data {
        text-align: center;
        padding: 4rem 2rem;
        color: var(--text-muted);
    }

    .no-data i {
        font-size: 4rem;
        margin-bottom: 1rem;
        opacity: 0.5;
    }

    .no-data h3 {
        margin: 1rem 0 0.5rem;
        font-size: 1.5rem;
    }

    .no-data p {
        margin-bottom: 2rem;
        font-size: 1.1rem;
    }

    @media (max-width: 768px) {
        .request-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 1rem;
        }

        .page-title {
            font-size: 1.5rem;
        }
    }
</style>
{% endblock %}
